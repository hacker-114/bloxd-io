try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cc4ef249-ae81-4808-b78a-8bff05547c2b",e._sentryDebugIdIdentifier="sentry-dbid-cc4ef249-ae81-4808-b78a-8bff05547c2b")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:crazygames-portal":!0})}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75910],{76228:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return a(51222)}])},67542:(e,t,a)=>{"use strict";a.d(t,{A:()=>A});var n=a(74848),r=a(96540),i=a(341),s=a(42293),o=a(45031),l=a(38037),d=a(88363),c=a(15373),u=a(16546);let g=(0,u.F3)("InAppReview",{web:()=>a.e(7873).then(a.bind(a,7873)).then(e=>new e.InAppReviewWeb)});var m=a(59386),p=a(16771),h=a(38131),f=a(64996);let y=e=>{let{gameId:t}=e,{services:a}=r.useContext(f.A),{user:n}=r.useContext(m.R),{syncPlayedTime:i}=r.useContext(d.oJ),s=r.useRef(Date.now()),o={};p.Ll.forEach(e=>{o[e]=!1});let l=r.useRef(o),c="IN_APP_REVIEW_REQUESTED",y=r.useRef(!1),w=()=>"true"===h.A.Instance.getItem(c),A=()=>h.A.Instance.setItem(c,"true"),{gamesPlayedService:v,analyticsService:T}=a;r.useEffect(()=>()=>{i()},[i,t]);let S=(0,r.useCallback)(()=>{let e=Math.round((Date.now()-s.current)/1e3);p.Ll.forEach(a=>{e>=60*a&&!l.current[a]&&(T.trackSessionPlaytimeRanges(t,a),l.current[a]=!0)})},[t,T]),x=(0,r.useCallback)(()=>{if(!n)return;let e=Math.round((Date.now()-s.current)/1e3);v.handlePlayedTimeForUPSync(t,e)},[n,t,v]),I=(0,r.useCallback)(()=>{Math.round((Date.now()-s.current)/1e3)>=300&&!w()&&(y.current=!0)},[]);return r.useEffect(()=>()=>{y.current&&!w()&&(u.Ii.isNativePlatform()&&g.requestReview(),A())},[]),r.useEffect(()=>{n&&x()},[n,x]),r.useEffect(()=>{let e=null,t=()=>{e=window.setInterval(()=>{x(),S()},p.sB)},a=()=>{e&&(window.clearInterval(e),x(),S(),e=null)},n=()=>{document.hidden?a():t()};return t(),document.addEventListener("visibilitychange",n),function(){document.removeEventListener("visibilitychange",n),e&&window.clearInterval(e)}},[S,x,I]),null};class w extends r.Component{constructor(e){super(e),this.addToRecentTimeout=null,this.gameStartTime=0,this.pageUnload=()=>{this.savePlayedGameTime()},this.processMessage=e=>{if(e.data&&e.data.type===i.x)switch(e.data.event){case"afterPlayNow":case"gameStartLoad":break;case"gameLoaded":{let{gfVersion:t}=e.data;this.handlePlayerStartedPlaying(t);return}}},this.delayedAddToRecent=()=>{let{game:e,userRecent:t}=this.props;t.addToRecent({id:e.id,slug:e.slug,name:e.name,cover:e.cover,covers:e.covers,videos:e.videos,status:e.status,iosFriendly:e.iosFriendly,androidFriendly:e.androidFriendly,mobileFriendly:!!(e.iosFriendly||e.androidFriendly),gameThumbLabels:[],playedTime:45})},this.state={trackTime:!1}}render(){let{game:e}=this.props,{trackTime:t}=this.state;return t&&(0,n.jsx)(y,{gameId:e.id})}componentDidMount(){let{services:e,game:t}=this.props;e.crazyAnalyticsService.gamePageLoaded(t.id,t.buildId),window.addEventListener("message",this.processMessage),window.addEventListener("pagehide",this.pageUnload)}componentWillUnmount(){this.savePlayedGameTime(),this.clearGameTracking(),window.removeEventListener("pagehide",this.pageUnload),window.removeEventListener("message",this.processMessage),this.props.services.crazyAnalyticsService.gamePageExited()}handlePlayerStartedPlaying(e){this.setGameTracking(e),this.addToRecent()}addToRecent(){this.addToRecentTimeout=window.setTimeout(this.delayedAddToRecent,45e3)}setGameTracking(e){let{services:t,game:a}=this.props,{gamesPlayedService:n,crazyAnalyticsService:r}=t;n.startedPlayingGame(a),this.gameStartTime=Date.now();let i=c.SS(a.slug)?.numPlays||1;r.playingStarts({gfVersion:e,gameId:a.id,buildId:a.buildId,numPlays:i}),(0,c.A8)(a.slug),this.setState({trackTime:!0})}savePlayedGameTime(){let{game:e,services:t}=this.props;if(this.gameStartTime){let a=Math.min(27e5,Date.now()-this.gameStartTime);t.gamesPlayedService.trackPlayedTime(e.slug,a),(0,o.Pq)(e.id,a)}}clearGameTracking(){this.addToRecentTimeout&&window.clearTimeout(this.addToRecentTimeout),this.setState({trackTime:!1})}}let A=(0,l.A)((0,d.QR)((0,s.A)(w)))},18705:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var n=a(74848),r=a(96540),i=a(13368),s=a.n(i),o=a(49754),l=a(35265),d=a(27108);let c=e=>{let{canonical:t,title:a,description:i,imageUrl:c="crazygames/share.png",imageWidth:u=1200,imageHeight:g=630,imageQuality:m,type:p}=e,{locale:h}=r.useContext(d.A),f=(0,o.Ay)(c,{width:u,height:g,fit:"crop",quality:m});return(0,n.jsxs)(s(),{children:[(0,n.jsx)("meta",{property:"og:url",content:t}),(0,n.jsx)("meta",{property:"og:title",content:a}),(0,n.jsx)("meta",{property:"og:description",content:i}),(0,n.jsx)("meta",{property:"og:locale",content:(0,l.qz)(h)}),(0,n.jsx)("meta",{property:"og:image",content:f}),(0,n.jsx)("meta",{property:"og:image:width",content:u.toString()}),(0,n.jsx)("meta",{property:"og:image:height",content:g.toString()}),p&&(0,n.jsx)("meta",{property:"og:type",content:p}),(0,n.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{property:"twitter:url",content:t}),(0,n.jsx)("meta",{property:"twitter:title",content:a}),(0,n.jsx)("meta",{property:"twitter:description",content:i}),(0,n.jsx)("meta",{property:"twitter:image",content:f})]})}},50671:(e,t,a)=>{"use strict";a.d(t,{$Y:()=>I,AJ:()=>f,CZ:()=>x,EJ:()=>v,H_:()=>y,Qe:()=>T,Qh:()=>m,Qq:()=>g,T5:()=>h,a1:()=>b,dq:()=>u,hA:()=>S,uA:()=>w,wN:()=>A,xV:()=>P});var n=a(40241),r=a(2503),i=a(96230),s=a(45300),o=a(35265),l=a(24348),d=a(97373),c=a(3600);function u(){return s.A.Instance.data.domains.map(e=>{let t="en-US"===(0,o.cy)(e.host),a={...i.a},n=new r.A(a).generateHome();if(!n)return null;let s=(0,c.A)(e.host,n.as,{isMainDomain:t,locale:e.locale}).toString();return{locale:e.locale,href:s.toString(),host:e.host}}).filter(e=>!!e)}function g(e){return j(e=>e.generateCompetitions(),{},e,"competitions")}function m(e){return j(e=>e.generateScholarship(),{},e,"scholarship")}function p(e){return _(t=>t.generatePaginatedUpdatedGames({page:e}),{})}function h(e){return j(e=>e.generateRecent(),{},e,"recent")}function f(){return _(e=>e.generateOriginals(),{})}function y(e){return j(e=>e.generateTags(),{},e,"tags")}function w(e,t){return j((e,t)=>e.generateGame(t),{slug:e},t,"game")}function A(e){return j(e=>e.generatePrivacyPolicy(),{},e,"privacyPolicy")}function v(e){return j(e=>e.generateTermsAndConditions(),{},e,"termsAndConditions")}function T(e){return j(e=>e.generateSearch(),{},e,"search")}function S(e){return _(t=>t.generateProfilePage(e),{})}async function x(e,t,a,n){if(t&&"hot"===t)return _(e=>e.generatePaginatedHotGames({page:1}),{});switch(e){case d.QI:return j(e=>e.generatePaginatedNewGames({page:n}),{},await a.getRouteProviderData("newGames"),"newGames");case d.F3:return p(n);default:return console.warn(`unexpected sorting in games ${e}`),p(n)}}async function I(e,t,a){if(e.isCategory){let n=await t.getRouteProviderData("category");return j((e,t)=>e.generateCategory(t),{slugTrl:e.slug,page:a},n,"category")}{let n=await t.getRouteProviderData("tag");return j((e,t)=>e.generateTag(t),{slugTrl:e.slug,page:a},n,"tag")}}async function b(e,t,a){return _((t,a)=>t.generateMultiplayerWithTag(a,e.slug),{page:t,sorting:a})}function P(e){return _(t=>t.generateAllGames(e),{})}function j(e,t,a,n){return(function(e){let t=s.A.Instance.data.domains;return e.map(e=>({domain:t.find(t=>(0,o.qz)(t.locale)===e.locale),routeData:e}))})(a).map(a=>{let s=a.domain,l="en-US"===(0,o.cy)(s.host),d=s.locale,u={...i.a,[n]:a.routeData.route,locale:a.routeData.locale},g=e(new r.A(u),t);if(!g||!a.domain)return null;let m=(0,c.A)(a.domain.host,g.as,{isMainDomain:l,locale:d}).toString();return{locale:a.domain.locale,href:m.toString(),host:a.domain.host}}).filter(e=>!!e)}function _(e,t){let a=s.A.Instance.data.domains;return n.YZ.map(n=>{let s=a.find(e=>e.locale===n);if(!s)return null;let d="en-US"===(0,o.cy)(s.host),u={...i.a,locale:l.Ec[n].serverLocale},g=e(new r.A(u),t);if(!g)return null;let m=(0,c.A)(s.host,g.as,{isMainDomain:d,locale:n}).toString();return{locale:s.locale,href:m.toString(),host:s.host}}).filter(e=>!!e)}},45031:(e,t,a)=>{"use strict";a.d(t,{Bs:()=>l,Lt:()=>u,Pq:()=>d,p4:()=>o});var n=a(12896),r=a(15373),i=a(38131);let s="personalized_carousel_games",o=2;function l(){let e=i.A.Instance.getItem(s);if(!(0,n.isDefined)(e))return c().map(e=>e.gameId).slice(0,o);let t=JSON.parse(e).slice(0,5);return t.sort((e,t)=>t.playTimeSeconds-e.playTimeSeconds),t.map(e=>e.gameId)}function d(e,t){let a=t/1e3;if(a<120)return;let r=i.A.Instance,o=r.getItem(s),l=((0,n.isDefined)(o)?JSON.parse(o):c()).filter(t=>t.gameId!==e);return l.unshift({gameId:e,playTimeSeconds:a}),l.length>10&&l.pop(),r.setItem(s,JSON.stringify(l)),l}function c(){let e=(0,r.Ax)().slice(0,3).map(e=>({gameId:e,playTimeSeconds:0,gameSlug:""}));return i.A.Instance.setItem(s,JSON.stringify(e)),e}function u(e,t){let a=[],n=new Set,r=Math.max(...e.map(e=>e?.items.length??0));for(let i=0;i<r;i++)for(let r of e)if(r?.items[i]&&!n.has(r.items[i].id)&&(n.add(r.items[i].id),a.push(r.items[i]),a.length>=t))return a;return a}},51222:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>U});var n=a(74848),r=a(96540),i=a(4743),s=a(14953),o=a.n(s),l=a(86715),d=a.n(l),c=a(46849),u=a(53164),g=a(94282),m=a(67542),p=a(45249),h=a(43541);let f=e=>{let{structuredData:t}=e,{i18n:a}=(0,i.uB)(),{routeHelper:s}=r.useContext(p.A);if(!t)return null;let o=[{...t,isPartOf:(0,h.Xr)(a,s)}];return(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(o)}})};var y=a(18705),w=a(71197),A=a(29467),v=a(7040),T=a(27434),S=a(45300),x=a(50671),I=a(8056),b=a(40499),P=a(54437),j=a(17033),_=a(35265),D=a(24348),E=a(62603),R=a(31162),k=a(97373),L=a(73319),C=a(11869),M=a(89737);let G=o()(()=>Promise.all([a.e(2174),a.e(24813),a.e(24857),a.e(79004),a.e(69545),a.e(36744),a.e(51668)]).then(a.bind(a,51668)),{loadableGenerated:{webpack:()=>[51668]},loading:()=>null,ssr:!0}),F=o()(()=>Promise.all([a.e(2174),a.e(24813),a.e(34475),a.e(24857),a.e(79004),a.e(69545),a.e(36744),a.e(63408)]).then(a.bind(a,63408)),{loadableGenerated:{webpack:()=>[63408]},loading:()=>null,ssr:!0}),N=e=>{let{game:t,related:a,alternatives:s,isCrawler:o,locale:l}=e,{routeHelper:d}=r.useContext(p.A),h=r.useContext(I.A),x=(0,i.uB)();r.useEffect(()=>((0,P.I)({gameId:t.id}),()=>(0,P.I)({gameId:null})),[t.id]);let j={name:t.name,category:t.category?.name||""},_=t.pageTitle?t.pageTitle:x._("game.head.title",{name:t.name}),D=t.metaDescription||x._("game.head.metaDescriptionFallback",j),E=d.gameCanonical(t.slug),R=S.A.Instance.data.advertizing.domain,k=!(0,b.xl)(h)&&!t.iosFriendly&&!t.androidFriendly,C=!!t.disableAds||"UNAVAILABLE"===t.status||k||(0,L.O)(),M=t.tags.map(e=>e.enSlug||e.slug);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.A,{locale:l,advertisingGame:{gameName:t.name,gameSlug:t.slug,categoryEnSlug:t.category?.enSlug,tagsSlug:M,numLikes:t.upvotes},disabled:C,smartRefresh:{minWaitInMs:t.minWaitForSmartRefreshInMs,maxWaitInMs:t.maxWaitForSmartRefreshInMs},edgeExperiments:{},children:[(0,n.jsxs)(g.A,{title:_,metaDescription:D,canonical:E,alternatives:s,children:[(0,n.jsx)("meta",{name:"apple-mobile-web-app-title",content:t.name}),"BASIC_LAUNCH"===t.status&&(0,n.jsx)("meta",{name:"robots",content:"noindex"}),(0,n.jsx)("link",{rel:"preconnect",href:R}),(()=>{if(t.customStructuredData)return(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:t.customStructuredData}})})()]}),(0,n.jsx)(f,{structuredData:t.structuredData}),(0,n.jsx)(y.A,{canonical:E,title:_,description:D,imageUrl:t.cover,imageQuality:100,type:"game"}),(0,n.jsx)(v.A,{children:(0,n.jsx)(G,{game:t,crawlerData:{isCrawler:o,games:a}})}),(0,n.jsx)(T.A,{children:(0,n.jsx)(F,{game:t,crawlerData:{isCrawler:o,games:a}})})]},t.slug),(0,n.jsx)(m.A,{game:t},`gametracking-${t.slug}`),(0,n.jsx)(u.R,{game:t}),(0,n.jsx)(w.A,{gameId:t.id,gameTechnology:t.technology}),(0,n.jsx)(A.A,{gameId:t.id})]})};N.getInitialProps=async e=>{let t=(0,_.JK)(e),a=(e,a,n)=>{let r=(0,D.Eh)(t)?e.category?.enSlug:e.category?.slug;return e.collection?a.tagPageDirectLink(e.collection,{returnRelative:n}):e.category?a.categoryPageDirectLink(r,{returnRelative:n}):a.homePageLink()},{pageService:n,routeDataService:r,crawlerService:i}=(0,M.V)(e),s=e.query&&e.query[k.xL],o=(0,b.hz)(e),l=(0,b.Gz)(o)?j.fU:j.TS,[{game:c},u]=await Promise.all([n.gamePage(s),r.getRouteProviderData("game")]),{res:g}=e;if("ARCHIVED"===c.status){let n=await r.getLocaleRouteProviderData(t),i=R.A.createFromContext(e,n);if(g){let e=a(c,i,!1);g.writeHead(302,{Location:e.as}),g.end()}else{let e=a(c,i,!0);d().push(e.href,e.as)}}g&&c.isKids&&(g.writeHead(302,{Location:`${S.A.Instance.data.kids}/game/${c.slug}`}),g.end());let m=(0,x.uA)(c.slug,u),p="true"===e.query[k.pr],h={game:c,numRelatedGames:l,alternatives:m,isCrawler:p,locale:t};return p?await i.replaceGamePageForCrawler(h,o):h};let U=(0,E.A)("game")((0,C.A)(N))}},e=>{var t=t=>e(e.s=t);e.O(0,[17061,32324,47213,71121,70227,83366,57183,66307,34282,90636,46593,38792],()=>t(76228)),_N_E=e.O()}]);
